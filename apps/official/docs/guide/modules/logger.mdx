# 日志模块

import { SourceCode, PackageManagerTabs } from 'rspress/theme';
import { Button } from '@/components/ui/Button';
import { FileCode2Icon, SquareArrowOutUpRightIcon  } from 'lucide-react'

<div className="flex space-x-2 items-center">    
    <a className="flex space-x-1 items-center" href="https://github.com/hikestack/hike/tree/main/packages/logger" target="_blank">
        <Button variant="secondary" size="sm">      
             <span>源码</span>
            <FileCode2Icon className="w-4 h-4 ml-1" />
        </Button>
    </a>
   
    <a className="flex space-x-1 items-center" href="/official/reference/logger/globals">
        <Button variant="secondary" size="sm">
            <span>API 参考</span>
            <SquareArrowOutUpRightIcon className="w-4 h-4 ml-1" />
        </Button>
    </a>
</div>

```LoggerModule``` 是一个为 NestJS 应用提供灵活日志记录功能的模块。它封装了常用的日志记录库（如 [```winston```](https://github.com/winstonjs/winston)），并提供了易于使用的接口，使开发者能够在整个 NestJS 应用中统一和高效地记录日志。

## 安装

<PackageManagerTabs command="install @hikestack/logger" />

:::tip 提示
安装对应适配器的依赖
:::

<PackageManagerTabs command="install winston" />

## 使用

导入并注册 ```LoggerModule```

```ts title="app.module.ts" {20-25}
import path from "path";
import { Module } from "@nestjs/common";
import { LoggerModule, WinstonAdapter } from "@hikestack/logger";
import { ConfigModule, ConfigService } from "@nestjs/config";

@Module({
	imports: [
		ConfigModule.forRoot({
			isGlobal: true,
			cache: true,
			envFilePath: [
				path.resolve(
					__dirname,
					"..",
					`env/${process.env.NODE_ENV || "development"}.env`,
				),
			],
			load: configs,
		}),
		LoggerModule.registerAsync({
			inject: [ConfigService],
			useFactory: (configService: ConfigService) => ({
				adapter: new WinstonAdapter(configService.get("logger")),
			}),
		})
	]
})
export class AppModule {}
```

使用构造函数注入

```ts title="app.service.ts" {7,9}
import { Injectable } from "@nestjs/common";
import { LoggerService } from "@hikestack/logger";

@Injectable()
export class AppService {
	constructor(
		private readonly loggerService: LoggerService,
	) {
		loggerService.log("Hello!");
	}
}
```

使用属性注入

```ts title="app.service.ts" {6,7}
import { Injectable, Inject } from "@nestjs/common";
import { LoggerService } from "@hikestack/logger";

@Injectable()
export class AppService {
    @Inject(LoggerService)
	private readonly loggerService: LoggerService;
}
```